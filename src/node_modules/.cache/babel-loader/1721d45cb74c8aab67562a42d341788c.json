{"ast":null,"code":"'use strict';\n\nconst promisify = require('promisify-es6');\n\nconst moduleConfig = require('./utils/module-config');\n\nconst streamToValue = require('./utils/stream-to-value');\n\nmodule.exports = arg => {\n  const send = moduleConfig(arg);\n  return promisify((id, callback) => {\n    const request = {\n      path: 'ping',\n      args: id,\n      qs: {\n        n: 1\n      } // Transform the response stream to a value:\n      // { Success: <boolean>, Time: <number>, Text: <string> }\n\n    };\n\n    const transform = (res, callback) => {\n      streamToValue(res, (err, res) => {\n        if (err) {\n          return callback(err);\n        } // go-ipfs http api currently returns 3 lines for a ping.\n        // they're a little messed, so take the correct values from each lines.\n\n\n        const pingResult = {\n          Success: res[1].Success,\n          Time: res[1].Time,\n          Text: res[2].Text\n        };\n        callback(null, pingResult);\n      });\n    };\n\n    send.andTransform(request, transform, callback);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}