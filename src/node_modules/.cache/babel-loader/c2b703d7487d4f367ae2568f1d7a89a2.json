{"ast":null,"code":"'use strict';\n\nconst dagNodeUtil = require('./util');\n\nconst cloneLinks = dagNodeUtil.cloneLinks;\nconst cloneData = dagNodeUtil.cloneData;\nconst toDAGLink = dagNodeUtil.toDAGLink;\n\nconst DAGLink = require('./../dag-link');\n\nconst create = require('./create');\n\nfunction addLink(node, link, callback) {\n  const links = cloneLinks(node);\n  const data = cloneData(node);\n\n  if (link.constructor && link.constructor.name === 'DAGLink') {// It's a DAGLink instance\n    // no need to do anything\n  } else if (link.constructor && link.constructor.name === 'DAGNode') {\n    // It's a DAGNode instance\n    // convert to link\n    link = toDAGLink(link);\n  } else {\n    // It's a Object with name, multihash/link and size\n    link.multihash = link.multihash || link.hash;\n\n    try {\n      link = new DAGLink(link.name, link.size, link.multihash);\n    } catch (err) {\n      return callback(err);\n    }\n  }\n\n  links.push(link);\n  create(data, links, callback);\n}\n\nmodule.exports = addLink;","map":null,"metadata":{},"sourceType":"script"}